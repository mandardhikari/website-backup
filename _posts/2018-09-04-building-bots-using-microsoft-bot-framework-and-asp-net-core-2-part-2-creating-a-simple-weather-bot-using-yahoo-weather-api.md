---
ID: 133
post_title: 'Building Bots Using Microsoft Bot Framework and ASP.Net Core 2: Part 2- Creating a simple Weather Bot Using Yahoo Weather API'
author: Mandar Dharmadhikari
post_excerpt: ""
layout: post
permalink: >
  https://theabodeofcode.com/building-bots-using-microsoft-bot-framework-and-asp-net-core-2-part-2-creating-a-simple-weather-bot-using-yahoo-weather-api/
published: true
post_date: 2018-09-04 15:29:57
---
&nbsp;
<h1>Introduction</h1>
Welcome to the part 2 of the Beginner to Advance series on building bots using Microsoft Bot Framework and ASP.NET core 2. Today we will go through some concepts and we will try to build our own bot using Bot Builder Template for v4 that we saw how to install in last blog post. The bot we will create will be a simple bot which queries the weather for a place using the yahoo weather api and gives back the response to the user. So let us dive right in!!
<h1>Basic Design Rule</h1>
Today we are not going to impart intelligence to our bot. Our bot will do only function of querying and displaying the weather data to the user. Our use case is simple, hence our design should also be simple. One point that we need to consider is that since&nbsp; bot rely on conversation to gather data, it is a real possibility that the user might try to lead the bot astray by asking random questions that are out of the scope of the bot. If that happens then the bot will start to behave stupidly and will not be able to resolve the queries of the user. This results into a poor user experience, which will in inadvertently led to the user getting fed up with the bot and they will not come back to use the bot services. So the principle for our design is simple

"<strong>We will greet the user and tell them what the bot can do. If the user tries to request any other option we will politely tell them that we cannot support the function at this point of time</strong>"
<h1>Basic Concepts</h1>
In case of bots, as stated earlier the conversation is the medium through which the user interacts with the application(the bot). So in case of the bot what ever happens we call that an activity, so an action basically is an activity. When the user replies or asks a question, they are sending a message to the bot hence it becomes an activity and it is called message activity. This is the basic activity around which most of the logic is written.&nbsp; There are the other handful of activities which monitor when another party joins the conversation, leaves it or if there is any update to the conversation. More about the activities can be found on the MSDN at&nbsp;<a href="https://docs.microsoft.com/en-us/azure/bot-service/bot-service-activities-entities?view=azure-bot-service-4.0&amp;tabs=cs" target="_blank" rel="noopener noreferrer">Entities and activity types</a>

When bot gets a message and replies to it, that constitutes a complete cycle when the conversations is initiated either way. This is called a Turn.

Now a bot can collect information from user in various way
<ol>
 	<li>Asking user questions</li>
 	<li>Giving a form to user to fill out.</li>
</ol>
The first is achieved using a dialog and the later is done using form flow. Today we will implement&nbsp; simple dialogs to collect information from the user.
<h2>What Are Dialogs?</h2>
Dialog provide a way for the developers to code in the questions or prompts that they want the bot to ask the user. The dialog is synonymous to the dialogues that happen in the human conversation. In human scenario the conversation generally proceed in a way, a formal greeting and then the rounds of discussion to exchange meaningful information and then the end. In case of bots dialogs allow us exactly to do that. We create a dialog for each question that we want to ask the user and then collect the answer using state management. This is a simplest scenario. Dialogs can be complex and composite where one parent dialog has multiple dialogs and perform their own tasks. We will explore them in later posts in this series.

Let us think what questions we want to ask the user
<ol>
 	<li>Their Name</li>
 	<li>The Place of which they want the weather report</li>
 	<li>If they want weather for current day or a forecast of 10 days.</li>
</ol>
We will create a dialog for each of the questions mentioned above. It should be observed that the information we are gathering is happening one after another and each question can be viewed as one step in a waterfall. Hence we will create a master/main dailog and use other three dialogs as waterfall steps each executed in the order they are defined. We will add one more dialog to send the end result to user and end the conversation.

Read more about dialogs at&nbsp;<a href="https://docs.microsoft.com/en-us/azure/bot-service/bot-service-design-conversation-flow?view=azure-bot-service-4.0" target="_blank" rel="noopener noreferrer">Design and control conversation flow</a>

Let us jump Right into the coding part now.
<h1>Code</h1>
<h2>Yahoo Weather API</h2>
In this tutorial we will use the yahoo weather API. More information about this API can be found out at developer portal of yahoo at&nbsp;<a href="https://developer.yahoo.com/weather/" target="_blank" rel="noopener noreferrer">Yahoo Weather API for your apps</a>. This API accepts a&nbsp; particular location and returns the current weather and returns forecast for 10 days including the day of query. This response can be returned in a json or a xml format and the method to query the result is a GET method.

Following is a sample response returned by the yahoo weather API for Adelaide, South Australia on 31st August 2018.
<div class="reCodeBlock" style="border:1px solid #7f9db9;overflow-y:auto;">
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;</code><span style="margin-left:6px !important;"><code style="color:blue;">"query"</code><code style="color:#000000;">: {</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:blue;">"count"</code><code style="color:#000000;">: 1,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:blue;">"created"</code><code style="color:#000000;">: </code><code style="color:blue;">"2018-08-31T10:34:16Z"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:blue;">"lang"</code><code style="color:#000000;">: </code><code style="color:blue;">"en-US"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:blue;">"results"</code><code style="color:#000000;">: {</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:18px !important;"><code style="color:blue;">"channel"</code><code style="color:#000000;">: {</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:blue;">"units"</code><code style="color:#000000;">: {</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"distance"</code><code style="color:#000000;">: </code><code style="color:blue;">"mi"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"pressure"</code><code style="color:#000000;">: </code><code style="color:blue;">"in"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"speed"</code><code style="color:#000000;">: </code><code style="color:blue;">"mph"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"temperature"</code><code style="color:#000000;">: </code><code style="color:blue;">"F"</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">},</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:blue;">"title"</code><code style="color:#000000;">: </code><code style="color:blue;">"Yahoo! Weather - Adelaide, SA, AU"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:blue;">"link"</code><code style="color:#000000;">: </code><code style="color:blue;">"<a href="http://us.rd.yahoo.com/dailynews/rss/weather/Country__Country/">http://us.rd.yahoo.com/dailynews/rss/weather/Country__Country/</a>*<a href="https://weather.yahoo.com/country/state/city-1099805/">https://weather.yahoo.com/country/state/city-1099805/</a>"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:blue;">"description"</code><code style="color:#000000;">: </code><code style="color:blue;">"Yahoo! Weather for Adelaide, SA, AU"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:blue;">"language"</code><code style="color:#000000;">: </code><code style="color:blue;">"en-us"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:blue;">"lastBuildDate"</code><code style="color:#000000;">: </code><code style="color:blue;">"Fri, 31 Aug 2018 08:04 PM ACST"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:blue;">"ttl"</code><code style="color:#000000;">: </code><code style="color:blue;">"60"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:blue;">"location"</code><code style="color:#000000;">: {</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"city"</code><code style="color:#000000;">: </code><code style="color:blue;">"Adelaide"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"country"</code><code style="color:#000000;">: </code><code style="color:blue;">"Australia"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"region"</code><code style="color:#000000;">: </code><code style="color:blue;">" SA"</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">},</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:blue;">"wind"</code><code style="color:#000000;">: {</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"chill"</code><code style="color:#000000;">: </code><code style="color:blue;">"50"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"direction"</code><code style="color:#000000;">: </code><code style="color:blue;">"248"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"speed"</code><code style="color:#000000;">: </code><code style="color:blue;">"18"</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">},</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:blue;">"atmosphere"</code><code style="color:#000000;">: {</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"humidity"</code><code style="color:#000000;">: </code><code style="color:blue;">"90"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"pressure"</code><code style="color:#000000;">: </code><code style="color:blue;">"994.0"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"rising"</code><code style="color:#000000;">: </code><code style="color:blue;">"0"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"visibility"</code><code style="color:#000000;">: </code><code style="color:blue;">"15.2"</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">},</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:blue;">"astronomy"</code><code style="color:#000000;">: {</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"sunrise"</code><code style="color:#000000;">: </code><code style="color:blue;">"6:36 am"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"sunset"</code><code style="color:#000000;">: </code><code style="color:blue;">"5:56 pm"</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">},</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:blue;">"image"</code><code style="color:#000000;">: {</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"title"</code><code style="color:#000000;">: </code><code style="color:blue;">"Yahoo! Weather"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"width"</code><code style="color:#000000;">: </code><code style="color:blue;">"142"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"height"</code><code style="color:#000000;">: </code><code style="color:blue;">"18"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"link"</code><code style="color:#000000;">: </code><code style="color:blue;">"<a href="http://weather.yahoo.com/">http://weather.yahoo.com</a>"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"url"</code><code style="color:#000000;">: </code><code style="color:blue;">"<a href="http://l.yimg.com/a/i/brand/purplelogo//uh/us/news-wea.gif">http://l.yimg.com/a/i/brand/purplelogo//uh/us/news-wea.gif</a>"</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">},</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:blue;">"item"</code><code style="color:#000000;">: {</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"title"</code><code style="color:#000000;">: </code><code style="color:blue;">"Conditions for Adelaide, SA, AU at 07:30 PM ACST"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"lat"</code><code style="color:#000000;">: </code><code style="color:blue;">"-34.918072"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"long"</code><code style="color:#000000;">: </code><code style="color:blue;">"138.598236"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"link"</code><code style="color:#000000;">: </code><code style="color:blue;">"<a href="http://us.rd.yahoo.com/dailynews/rss/weather/Country__Country/">http://us.rd.yahoo.com/dailynews/rss/weather/Country__Country/</a>*<a href="https://weather.yahoo.com/country/state/city-1099805/">https://weather.yahoo.com/country/state/city-1099805/</a>"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"pubDate"</code><code style="color:#000000;">: </code><code style="color:blue;">"Fri, 31 Aug 2018 07:30 PM ACST"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"condition"</code><code style="color:#000000;">: {</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:blue;">"code"</code><code style="color:#000000;">: </code><code style="color:blue;">"29"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:blue;">"date"</code><code style="color:#000000;">: </code><code style="color:blue;">"Fri, 31 Aug 2018 07:30 PM ACST"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:blue;">"temp"</code><code style="color:#000000;">: </code><code style="color:blue;">"54"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:blue;">"text"</code><code style="color:#000000;">: </code><code style="color:blue;">"Partly Cloudy"</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:#000000;">},</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"forecast"</code><code style="color:#000000;">: [</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"code"</code><code style="color:#000000;">: </code><code style="color:blue;">"39"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"date"</code><code style="color:#000000;">: </code><code style="color:blue;">"31 Aug 2018"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"day"</code><code style="color:#000000;">: </code><code style="color:blue;">"Fri"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"high"</code><code style="color:#000000;">: </code><code style="color:blue;">"56"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"low"</code><code style="color:#000000;">: </code><code style="color:blue;">"50"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"text"</code><code style="color:#000000;">: </code><code style="color:blue;">"Scattered Showers"</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">},</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"code"</code><code style="color:#000000;">: </code><code style="color:blue;">"26"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"date"</code><code style="color:#000000;">: </code><code style="color:blue;">"01 Sep 2018"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"day"</code><code style="color:#000000;">: </code><code style="color:blue;">"Sat"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"high"</code><code style="color:#000000;">: </code><code style="color:blue;">"56"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"low"</code><code style="color:#000000;">: </code><code style="color:blue;">"49"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"text"</code><code style="color:#000000;">: </code><code style="color:blue;">"Cloudy"</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">},</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"code"</code><code style="color:#000000;">: </code><code style="color:blue;">"30"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"date"</code><code style="color:#000000;">: </code><code style="color:blue;">"02 Sep 2018"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"day"</code><code style="color:#000000;">: </code><code style="color:blue;">"Sun"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"high"</code><code style="color:#000000;">: </code><code style="color:blue;">"54"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"low"</code><code style="color:#000000;">: </code><code style="color:blue;">"42"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"text"</code><code style="color:#000000;">: </code><code style="color:blue;">"Partly Cloudy"</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">},</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"code"</code><code style="color:#000000;">: </code><code style="color:blue;">"30"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"date"</code><code style="color:#000000;">: </code><code style="color:blue;">"03 Sep 2018"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"day"</code><code style="color:#000000;">: </code><code style="color:blue;">"Mon"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"high"</code><code style="color:#000000;">: </code><code style="color:blue;">"55"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"low"</code><code style="color:#000000;">: </code><code style="color:blue;">"40"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"text"</code><code style="color:#000000;">: </code><code style="color:blue;">"Partly Cloudy"</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">},</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"code"</code><code style="color:#000000;">: </code><code style="color:blue;">"32"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"date"</code><code style="color:#000000;">: </code><code style="color:blue;">"04 Sep 2018"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"day"</code><code style="color:#000000;">: </code><code style="color:blue;">"Tue"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"high"</code><code style="color:#000000;">: </code><code style="color:blue;">"59"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"low"</code><code style="color:#000000;">: </code><code style="color:blue;">"41"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"text"</code><code style="color:#000000;">: </code><code style="color:blue;">"Sunny"</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">},</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"code"</code><code style="color:#000000;">: </code><code style="color:blue;">"39"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"date"</code><code style="color:#000000;">: </code><code style="color:blue;">"05 Sep 2018"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"day"</code><code style="color:#000000;">: </code><code style="color:blue;">"Wed"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"high"</code><code style="color:#000000;">: </code><code style="color:blue;">"64"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"low"</code><code style="color:#000000;">: </code><code style="color:blue;">"50"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"text"</code><code style="color:#000000;">: </code><code style="color:blue;">"Scattered Showers"</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">},</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"code"</code><code style="color:#000000;">: </code><code style="color:blue;">"39"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"date"</code><code style="color:#000000;">: </code><code style="color:blue;">"06 Sep 2018"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"day"</code><code style="color:#000000;">: </code><code style="color:blue;">"Thu"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"high"</code><code style="color:#000000;">: </code><code style="color:blue;">"55"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"low"</code><code style="color:#000000;">: </code><code style="color:blue;">"47"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"text"</code><code style="color:#000000;">: </code><code style="color:blue;">"Scattered Showers"</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">},</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"code"</code><code style="color:#000000;">: </code><code style="color:blue;">"39"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"date"</code><code style="color:#000000;">: </code><code style="color:blue;">"07 Sep 2018"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"day"</code><code style="color:#000000;">: </code><code style="color:blue;">"Fri"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"high"</code><code style="color:#000000;">: </code><code style="color:blue;">"53"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"low"</code><code style="color:#000000;">: </code><code style="color:blue;">"48"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"text"</code><code style="color:#000000;">: </code><code style="color:blue;">"Scattered Showers"</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">},</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"code"</code><code style="color:#000000;">: </code><code style="color:blue;">"30"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"date"</code><code style="color:#000000;">: </code><code style="color:blue;">"08 Sep 2018"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"day"</code><code style="color:#000000;">: </code><code style="color:blue;">"Sat"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"high"</code><code style="color:#000000;">: </code><code style="color:blue;">"58"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"low"</code><code style="color:#000000;">: </code><code style="color:blue;">"48"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"text"</code><code style="color:#000000;">: </code><code style="color:blue;">"Partly Cloudy"</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">},</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"code"</code><code style="color:#000000;">: </code><code style="color:blue;">"32"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"date"</code><code style="color:#000000;">: </code><code style="color:blue;">"09 Sep 2018"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"day"</code><code style="color:#000000;">: </code><code style="color:blue;">"Sun"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"high"</code><code style="color:#000000;">: </code><code style="color:blue;">"68"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"low"</code><code style="color:#000000;">: </code><code style="color:blue;">"48"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:42px !important;"><code style="color:blue;">"text"</code><code style="color:#000000;">: </code><code style="color:blue;">"Sunny"</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">}</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:#000000;">],</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"description"</code><code style="color:#000000;">: </code><code style="color:blue;">"&lt;![CDATA[&lt;img src=\"<a href="http://l.yimg.com/a/i/us/we/52/29.gif">http://l.yimg.com/a/i/us/we/52/29.gif</a>\"/&gt;\n
\n<b>Current Conditions:</b>\n
Partly Cloudy\n
\n
\n<b>Forecast:</b>\n
Fri - Scattered Showers. High: 56Low: 50\n
Sat - Cloudy. High: 56Low: 49\n
Sun - Partly Cloudy. High: 54Low: 42\n
Mon - Partly Cloudy. High: 55Low: 40\n
Tue - Sunny. High: 59Low: 41\n
\n
\n&lt;a href=\"<a href="http://us.rd.yahoo.com/dailynews/rss/weather/Country__Country/">http://us.rd.yahoo.com/dailynews/rss/weather/Country__Country/</a>*<a href="https://weather.yahoo.com/country/state/city-1099805/">https://weather.yahoo.com/country/state/city-1099805/</a>\"&gt;Full Forecast at Yahoo! Weather\n
\n
\n
\n]]&gt;"</code><code style="color:#000000;">,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:30px !important;"><code style="color:blue;">"guid"</code><code style="color:#000000;">: { </code><code style="color:blue;">"isPermaLink"</code><code style="color:#000000;">: </code><code style="color:blue;">"false"</code> <code style="color:#000000;">}</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">}</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:18px !important;"><code style="color:#000000;">}</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#000000;">}</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;</code><span style="margin-left:6px !important;"><code style="color:#000000;">}</code></span></div>
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;"><code style="color:#000000;">}</code></span></div>
</div>
We get above response by querying the end point
<div class="reCodeBlock" style="border:1px solid #7f9db9;overflow-y:auto;">
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;"><code style="color:#000000;"><a href="https://query.yahooapis.com/v1/public/yql?q=select">https://query.yahooapis.com/v1/public/yql?q=select</a> * from weather.forecast where woeid in (select woeid from geo.places(1) where text="<strong>PlaceHere</strong>")&amp;format=json</code></span></div>
</div>
so when we provide the place it will return the json response as shown above.

Now let us dive into the code.
<h2>Creating Bot Project</h2>
Let us create a sample bot called <strong>WeatherAssistantBot</strong> using the template that we installed in the part 1.

<img class="alignnone size-full wp-image-134" src="https://theserverlessspirit.files.wordpress.com/2018/08/createweatherassitantbot.jpg" alt="CreateWeatherAssitantBot" width="1177" height="820">

Let us install the <strong>NewtonSoft.Json</strong> package into our project as we will require the package to parse the json object which we will receive from the Yahoo weather API. The package can be installed using Nuget Package Manager Console as shown below

<img class="alignnone size-full wp-image-135" src="https://theserverlessspirit.files.wordpress.com/2018/08/installnewtsonfot.jpg" alt="InstallNewtSonfot" width="1186" height="449">

Now as we are going to use the dialogs to communicate with the user, we will also install the Dialogs package from the Bot Builder SDK . It can be done as shown below

<img class="alignnone size-full wp-image-137" src="https://theserverlessspirit.files.wordpress.com/2018/08/installdialogspackage.jpg" alt="InstallDialogsPackage.JPG" width="1882" height="602">

Once this is done we can start our coding. Our final solution will look something like below.

<img class="alignnone size-full wp-image-147" src="https://theserverlessspirit.files.wordpress.com/2018/09/solutionoveriew.jpg" alt="SolutionOveriew" width="560" height="655">

Let us go through some of the important classes.
<h3>Constants.cs</h3>
I like to store my constant values separately in a constants class. The class contains the Yahoo API url and the names of the Dialogs that we will create. The constant.cs looks like below.
<div class="reCodeBlock" style="border:1px solid #7f9db9;overflow-y:auto;">
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;"><code style="color:#006699;font-weight:bold;">public</code> <code style="color:#006699;font-weight:bold;">class</code> <code style="color:#000000;">Constants</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#808080;">///
</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#808080;">/// End Point To Access the Yahoo Weather API</code></span></div>
<div style="background-color:#ffffff;">

<code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><span style="margin-left:12px !important;"><code style="color:#808080;">///</code></span></span>

<span style="margin-left:12px !important;"><code style="color:#808080;"></code></span>

</div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#006699;font-weight:bold;">public</code> <code style="color:#006699;font-weight:bold;">const</code> <code style="color:#006699;font-weight:bold;">string</code> <code style="color:#000000;">YahooQueryEndpoint = @</code><code style="color:blue;">"<a href="https://query.yahooapis.com/v1/public/yql?q=select">https://query.yahooapis.com/v1/public/yql?q=select</a> * from weather.forecast where woeid in (select woeid from geo.places(1) where text="</code><code style="color:blue;">"{0}"</code><code style="color:blue;">")&amp;format=json"</code><code style="color:#000000;">;</code></span></div>
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#006699;font-weight:bold;">public</code> <code style="color:#006699;font-weight:bold;">enum</code> <code style="color:#000000;">DialogSteps</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">NameStep,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">PlaceStep,</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">GetServiceChoice,</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">MainDialog</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#000000;">}</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;</code><span style="margin-left:6px !important;">&nbsp;</span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;"><code style="color:#000000;">}</code></span></div>
</div>
<h3>WeatherApiResponse.cs</h3>
This is the class generated using the json response we got from querying the Yahoo API. I have used the json to C# extension available on Visual Studio Market place to generate a C# class. The extension can be downloaded from market place. You can use any other online converters if you wish. We will deserialize the json response into this class once we receive the response from the Yahoo API.
<h3>BotState.cs</h3>
We are going to use this class to store the state in the bot. This class inherits the dictionary of string&nbsp; and object as key value pair. We are going to add the key value pairs to store the answers of the questions we are going to ask (mentioned above) viz. name, place and the choice for report. The class is simple and looks as following.
<div class="reCodeBlock" style="border:1px solid #7f9db9;overflow-y:auto;">
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;"><code style="color:#006699;font-weight:bold;">namespace</code> <code style="color:#000000;">WeatherAssistantBot</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#808080;">///
</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#808080;">/// Class to store the Name and Place in Memory during Conversation</code></span></div>
<div style="background-color:#ffffff;">

<code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><span style="margin-left:12px !important;"><code style="color:#808080;">///</code></span></span>

<span style="margin-left:12px !important;"><code style="color:#808080;"></code></span>

</div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#006699;font-weight:bold;">public</code> <code style="color:#006699;font-weight:bold;">class</code> <code style="color:#000000;">BotState : System.Collections.Generic.Dictionary&lt;</code><code style="color:#006699;font-weight:bold;">string</code><code style="color:#000000;">, </code><code style="color:#006699;font-weight:bold;">object</code><code style="color:#000000;">&gt;</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#006699;font-weight:bold;">private</code> <code style="color:#006699;font-weight:bold;">const</code> <code style="color:#006699;font-weight:bold;">string</code> <code style="color:#000000;">NameKey = </code><code style="color:blue;">"Name"</code><code style="color:#000000;">;</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#006699;font-weight:bold;">private</code> <code style="color:#006699;font-weight:bold;">const</code> <code style="color:#006699;font-weight:bold;">string</code> <code style="color:#000000;">PlaceKey = </code><code style="color:blue;">"Place"</code><code style="color:#000000;">;</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#006699;font-weight:bold;">private</code> <code style="color:#006699;font-weight:bold;">const</code> <code style="color:#006699;font-weight:bold;">string</code> <code style="color:#000000;">ServiceKey = </code><code style="color:blue;">"ServiceChoice"</code><code style="color:#000000;">;</code></span></div>
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#006699;font-weight:bold;">public</code> <code style="color:#000000;">BotState()</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#006699;font-weight:bold;">this</code><code style="color:#000000;">[NameKey] = </code><code style="color:#006699;font-weight:bold;">null</code><code style="color:#000000;">;</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#006699;font-weight:bold;">this</code><code style="color:#000000;">[PlaceKey] = </code><code style="color:#006699;font-weight:bold;">null</code><code style="color:#000000;">;</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#006699;font-weight:bold;">this</code><code style="color:#000000;">[ServiceKey] = 0;</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">}</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#006699;font-weight:bold;">public</code> <code style="color:#006699;font-weight:bold;">string</code> <code style="color:#000000;">Name</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#006699;font-weight:bold;">get</code> <code style="color:#000000;">{ </code><code style="color:#006699;font-weight:bold;">return</code> <code style="color:#000000;">(</code><code style="color:#006699;font-weight:bold;">string</code><code style="color:#000000;">)</code><code style="color:#006699;font-weight:bold;">this</code><code style="color:#000000;">[NameKey]; }</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#006699;font-weight:bold;">set</code> <code style="color:#000000;">{ </code><code style="color:#006699;font-weight:bold;">this</code><code style="color:#000000;">[NameKey] = value; }</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">}</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#006699;font-weight:bold;">public</code> <code style="color:#006699;font-weight:bold;">string</code> <code style="color:#000000;">Place</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#006699;font-weight:bold;">get</code> <code style="color:#000000;">{ </code><code style="color:#006699;font-weight:bold;">return</code> <code style="color:#000000;">(</code><code style="color:#006699;font-weight:bold;">string</code><code style="color:#000000;">)</code><code style="color:#006699;font-weight:bold;">this</code><code style="color:#000000;">[PlaceKey]; }</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#006699;font-weight:bold;">set</code> <code style="color:#000000;">{ </code><code style="color:#006699;font-weight:bold;">this</code><code style="color:#000000;">[PlaceKey] = value; }</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">}</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#006699;font-weight:bold;">public</code> <code style="color:#006699;font-weight:bold;">int</code> <code style="color:#000000;">ServiceChoice</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#006699;font-weight:bold;">get</code> <code style="color:#000000;">{ </code><code style="color:#006699;font-weight:bold;">return</code> <code style="color:#000000;">(</code><code style="color:#006699;font-weight:bold;">int</code><code style="color:#000000;">)</code><code style="color:#006699;font-weight:bold;">this</code><code style="color:#000000;">[ServiceKey]; }</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#006699;font-weight:bold;">set</code> <code style="color:#000000;">{ </code><code style="color:#006699;font-weight:bold;">this</code><code style="color:#000000;">[ServiceKey] = value; }</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">}</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#000000;">}</code></span></div>
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;"><code style="color:#000000;">}</code></span></div>
</div>
This state object will be saved in the memory for the time being. We will see other ways of state management in later posts.
<h3>WeatherAssistantBot.cs</h3>
This is one of the most important class in the solution as it contains the dialogs and the logic to construct the dialogs. This class is inherited from the IBot interface. We will begin by creating a dialog set object which will store all the dialogs&nbsp; and the bot framework will manage state and execute the dialogs based upon how they are defined in the dialogset. Now let us create a Task to greet the user and get their name. This will be an asynchronous task and will be the first to be invoked in the waterfall.

The task looks like below.
<div class="reCodeBlock" style="border:1px solid #7f9db9;overflow-y:auto;">
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;"><code style="color:#006699;font-weight:bold;">private</code> <code style="color:#006699;font-weight:bold;">readonly</code> <code style="color:#000000;">DialogSet dialogSet;</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;"><code style="color:#006699;font-weight:bold;">private</code> <code style="color:#000000;">async Task GetNameTask(DialogContext dialogContext, </code><code style="color:#006699;font-weight:bold;">object</code> <code style="color:#000000;">result, SkipStepFunction next)</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#000000;">await dialogContext.Prompt(Constants.DialogSteps.NameStep.ToString(), </code><code style="color:blue;">"Hi User.May I please know your name?"</code> <code style="color:#000000;">);</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;"><code style="color:#000000;">}</code></span></div>
</div>
DialogContext object gets constructed in the <strong>OnTurn</strong> Task which calls the dialogs. This dialog will ask the user for their name. Once the user reply back, we will send out another prompt using a <strong>GetPlaceTask</strong>. The task looks like follows
<div class="reCodeBlock" style="border:1px solid #7f9db9;overflow-y:auto;">
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;"><code style="color:#006699;font-weight:bold;">private</code> <code style="color:#000000;">async Task GetPlaceTask(DialogContext dialogContext, </code><code style="color:#006699;font-weight:bold;">object</code> <code style="color:#000000;">result, SkipStepFunction next)</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#000000;">var state = dialogContext.Context.GetConversationState();</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#000000;">state.Name = ((TextResult)result).Value;</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#000000;">await dialogContext.Prompt(Constants.DialogSteps.PlaceStep.ToString(), $</code><code style="color:blue;">"Hi {state.Name}, I am Weather Assistant Bot. \n I can get weather reports for you.\n Please enter a name of place."</code><code style="color:#000000;">);</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;"><code style="color:#000000;">}</code></span></div>
</div>
In this task we saving the Name that we received from the user and then we are asking them to enter the name of the place. Post this we get the information about the choice of weather report using the <strong>GetServiceChoiceTask&nbsp;</strong> which is as follows
<div class="reCodeBlock" style="border:1px solid #7f9db9;overflow-y:auto;">
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;"><code style="color:#006699;font-weight:bold;">private</code> <code style="color:#000000;">async Task GetServiceChoiceTask(DialogContext dialogContext, </code><code style="color:#006699;font-weight:bold;">object</code> <code style="color:#000000;">result, SkipStepFunction next)</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#000000;">var state = dialogContext.Context.GetConversationState();</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#000000;">state.Place = ((TextResult)result).Value;</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#000000;">await dialogContext.Prompt(Constants.DialogSteps.GetServiceChoice.ToString(), $</code><code style="color:blue;">"Please Enter 1 for Today's weather or 2 for next 10 days forecast."</code><code style="color:#000000;">);</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;"><code style="color:#000000;">}</code></span></div>
</div>
In this task we save the name of the place which the user sent us. Then we ask the user to enter 1 or 2 as a choice. In next task&nbsp;<strong>ReplyBackTask&nbsp;</strong> we actually call the helper which gets and parse the response from Yahoo API based upon the option that was entered. The task is as follows
<div class="reCodeBlock" style="border:1px solid #7f9db9;overflow-y:auto;">
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;"><code style="color:#006699;font-weight:bold;">private</code> <code style="color:#000000;">async Task ReplyBackTask(DialogContext dialogContext, </code><code style="color:#006699;font-weight:bold;">object</code> <code style="color:#000000;">result, SkipStepFunction next)</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:33px !important;">&nbsp;</span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">var state = dialogContext.Context.GetConversationState&lt;BotState&gt;();</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#006699;font-weight:bold;">int</code> <code style="color:#000000;">serviceChoice = 0;</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#006699;font-weight:bold;">int</code><code style="color:#000000;">.TryParse(((TextResult)result).Value, </code><code style="color:#006699;font-weight:bold;">out</code> <code style="color:#000000;">serviceChoice);</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#006699;font-weight:bold;">if</code> <code style="color:#000000;">(serviceChoice == 1 || serviceChoice == 2)</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#000000;">state.ServiceChoice = serviceChoice;</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#000000;">WeatherHelper weatherHelper = </code><code style="color:#006699;font-weight:bold;">new</code> <code style="color:#000000;">WeatherHelper();</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#006699;font-weight:bold;">string</code> <code style="color:#000000;">weatherReport = await weatherHelper.GetWeatherReport(state.Place, state.ServiceChoice);</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#000000;">await dialogContext.Context.SendActivity($</code><code style="color:blue;">"Dear {state.Name}, \n {weatherReport}"</code><code style="color:#000000;">);</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">}</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#006699;font-weight:bold;">else</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#000000;">await dialogContext.Context.SendActivity($</code><code style="color:blue;">"Hi {state.Name}, \n You have entered {serviceChoice} which is incorrect. \n Thanks for using WeatherAssitant"</code><code style="color:#000000;">);</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">}</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;">&nbsp;</span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">await dialogContext.End();</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">}</code></span></div>
</div>
Here a call to the WeatherHelper class is made which parses the response. We then pass the response back to the user using the SendActivity method and once the response is sent we end the activity and the cycle restarts again. Now let us see how we can add the dialogs. It is done using the public constructor without parameters as shown below.
<div class="reCodeBlock" style="border:1px solid #7f9db9;overflow-y:auto;">
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;"><code style="color:#006699;font-weight:bold;">public</code> <code style="color:#000000;">WeatherAssistantBot()</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">dialogSet = </code><code style="color:#006699;font-weight:bold;">new</code> <code style="color:#000000;">DialogSet();</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">dialogSet.Add(Constants.DialogSteps.NameStep.ToString(), </code><code style="color:#006699;font-weight:bold;">new</code> <code style="color:#000000;">Microsoft.Bot.Builder.Dialogs.TextPrompt());</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">dialogSet.Add(Constants.DialogSteps.PlaceStep.ToString(), </code><code style="color:#006699;font-weight:bold;">new</code> <code style="color:#000000;">Microsoft.Bot.Builder.Dialogs.TextPrompt());</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">dialogSet.Add(Constants.DialogSteps.GetServiceChoice.ToString(), </code><code style="color:#006699;font-weight:bold;">new</code> <code style="color:#000000;">Microsoft.Bot.Builder.Dialogs.TextPrompt());</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">dialogSet.Add(Constants.DialogSteps.MainDialog.ToString(), </code><code style="color:#006699;font-weight:bold;">new</code> <code style="color:#000000;">WaterfallStep[] { GetNameTask, GetPlaceTask, GetServiceChoiceTask, ReplyBackTask });</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">}</code></span></div>
</div>
As stated in the previous part, the OnTurn Task is responsible for tracking the current context and passing control to the next dialog and handling of the state. In this Task we check if the activity received is message or not. If it is&nbsp; a message, we keep the conversation alive by using the Continue method on the current context (In order to check if the conversation is just initiated we check the <strong>Responded</strong> flag and if it is not true we initiate the conversation), sounds tough??? Well I will suggest you to attach the debug point on the OnTurn Task to check how the dialog gets initiated.

Let us see how the OnTurn task looks.
<div class="reCodeBlock" style="border:1px solid #7f9db9;overflow-y:auto;">
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;"><code style="color:#006699;font-weight:bold;">public</code> <code style="color:#000000;">async Task OnTurn(ITurnContext turnContext)</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#000000;">var state = turnContext.GetConversationState();</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#000000;">var dialogContext = dialogSet.CreateContext(turnContext, state);</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#006699;font-weight:bold;">if</code> <code style="color:#000000;">(dialogContext.Context.Activity.Type == ActivityTypes.Message)</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">await dialogContext.Continue();</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#006699;font-weight:bold;">if</code> <code style="color:#000000;">(!dialogContext.Context.Responded)</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">await dialogContext.Begin(Constants.DialogSteps.MainDialog.ToString());</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">}</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#000000;">}</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;">&nbsp;</span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;"><code style="color:#000000;">}</code></span></div>
</div>
<h3>WeatherHelper.cs</h3>
We have an asynchronous Task in this helper which calls the Yahoo API and then based upon the choice made calls the necessary methods to parse the string.

Let us see the code to get the response from Yahoo API.
<div class="reCodeBlock" style="border:1px solid #7f9db9;overflow-y:auto;">
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;"><code style="color:#006699;font-weight:bold;">public</code> <code style="color:#000000;">async Task&lt;</code><code style="color:#006699;font-weight:bold;">string</code><code style="color:#000000;">&gt; GetWeatherReport(</code><code style="color:#006699;font-weight:bold;">string</code> <code style="color:#000000;">place, </code><code style="color:#006699;font-weight:bold;">int</code> <code style="color:#000000;">option)</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#006699;font-weight:bold;">string</code> <code style="color:#000000;">weatherResponse = </code><code style="color:#006699;font-weight:bold;">string</code><code style="color:#000000;">.Empty;</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">HttpClient client = </code><code style="color:#006699;font-weight:bold;">new</code> <code style="color:#000000;">HttpClient();</code></span></div>
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#006699;font-weight:bold;">string</code> <code style="color:#000000;">uri = String.Format(Constants.YahooQueryEndpoint, place);</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">HttpResponseMessage resp = await client.GetAsync(uri);</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">var response = resp.Content.ReadAsStringAsync();</code></span></div>
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">WeatherApiResponse weatherApiResponse = JsonConvert.DeserializeObject(response.Result);</code></span></div>
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#006699;font-weight:bold;">switch</code> <code style="color:#000000;">(option)</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#006699;font-weight:bold;">case</code> <code style="color:#000000;">1: weatherResponse = GetTodaysWeather(weatherApiResponse);</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:60px !important;"><code style="color:#006699;font-weight:bold;">break</code><code style="color:#000000;">;</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#006699;font-weight:bold;">case</code> <code style="color:#000000;">2: weatherResponse = GetForecast(weatherApiResponse);</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:60px !important;"><code style="color:#006699;font-weight:bold;">break</code><code style="color:#000000;">;</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#006699;font-weight:bold;">default</code><code style="color:#000000;">: </code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:60px !important;"><code style="color:#006699;font-weight:bold;">break</code><code style="color:#000000;">;</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">}</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#006699;font-weight:bold;">return</code> <code style="color:#000000;">weatherResponse;</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">}</code></span></div>
</div>
the code is self-explanatory.&nbsp; The methods to parse the string are shown below.

<img class="alignnone size-full wp-image-151" src="https://theserverlessspirit.files.wordpress.com/2018/09/gettodaysweather.jpg" alt="GetTodaysWeather.JPG" width="1475" height="491">

<img class="alignnone size-full wp-image-150" src="https://theserverlessspirit.files.wordpress.com/2018/09/getforecast.jpg" alt="GetForecast.JPG" width="1240" height="637">
<h3>Program.cs</h3>
We do not modify this class. We will keep it as it is.
<h3>Startup.cs</h3>
We will just replace the name of the EchoBot with WeatherAssitantBot in this class. Another change we will make is to replace TurnState with BotState in the class. The startup.cs after modification looks like following.
<div class="reCodeBlock" style="border:1px solid #7f9db9;overflow-y:auto;">
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;"><code style="color:#006699;font-weight:bold;">public</code> <code style="color:#006699;font-weight:bold;">class</code> <code style="color:#000000;">Startup</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;">&nbsp;</span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#006699;font-weight:bold;">public</code> <code style="color:#000000;">Startup(IHostingEnvironment env)</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">var builder = </code><code style="color:#006699;font-weight:bold;">new</code> <code style="color:#000000;">ConfigurationBuilder()</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#000000;">.SetBasePath(env.ContentRootPath)</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#000000;">.AddJsonFile(</code><code style="color:blue;">"appsettings.json"</code><code style="color:#000000;">, optional: </code><code style="color:#006699;font-weight:bold;">true</code><code style="color:#000000;">, reloadOnChange: </code><code style="color:#006699;font-weight:bold;">true</code><code style="color:#000000;">)</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#000000;">.AddJsonFile($</code><code style="color:blue;">"appsettings.{env.EnvironmentName}.json"</code><code style="color:#000000;">, optional: </code><code style="color:#006699;font-weight:bold;">true</code><code style="color:#000000;">)</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#000000;">.AddEnvironmentVariables();</code></span></div>
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">Configuration = builder.Build();</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">}</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#006699;font-weight:bold;">public</code> <code style="color:#000000;">IConfiguration Configuration { </code><code style="color:#006699;font-weight:bold;">get</code><code style="color:#000000;">; }</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#008200;">// This method gets called by the runtime. Use this method to add services to the container.</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#006699;font-weight:bold;">public</code> <code style="color:#006699;font-weight:bold;">void</code> <code style="color:#000000;">ConfigureServices(IServiceCollection services)</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">services.AddBot(options =&gt;</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#000000;">options.CredentialProvider = </code><code style="color:#006699;font-weight:bold;">new</code> <code style="color:#000000;">ConfigurationCredentialProvider(Configuration);</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#000000;">options.Middleware.Add(</code><code style="color:#006699;font-weight:bold;">new</code> <code style="color:#000000;">CatchExceptionMiddleware(async (context, exception) =&gt;</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:60px !important;"><code style="color:#000000;">await context.TraceActivity(</code><code style="color:blue;">"WeatherBot Exception"</code><code style="color:#000000;">, exception);</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:60px !important;"><code style="color:#000000;">await context.SendActivity(</code><code style="color:blue;">"Sorry, it looks like something went wrong!"</code><code style="color:#000000;">);</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#000000;">}));</code></span></div>
<div style="background-color:#f8f8f8;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#000000;">IStorage dataStore = </code><code style="color:#006699;font-weight:bold;">new</code> <code style="color:#000000;">MemoryStorage();</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#000000;">options.Middleware.Add(</code><code style="color:#006699;font-weight:bold;">new</code> <code style="color:#000000;">ConversationState(dataStore));</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">});</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">}</code></span></div>
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#008200;">// This method gets called by the runtime. Use this method to configure the HTTP request pipeline.</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#006699;font-weight:bold;">public</code> <code style="color:#006699;font-weight:bold;">void</code> <code style="color:#000000;">Configure(IApplicationBuilder app, IHostingEnvironment env)</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#006699;font-weight:bold;">if</code> <code style="color:#000000;">(env.IsDevelopment())</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">{</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#000000;">app.UseDeveloperExceptionPage();</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">}</code></span></div>
<div style="background-color:#ffffff;"><span style="margin-left:0 !important;">&nbsp;</span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:36px !important;"><code style="color:#000000;">app.UseDefaultFiles()</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#000000;">.UseStaticFiles()</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:48px !important;"><code style="color:#000000;">.UseBotFramework();</code></span></div>
<div style="background-color:#ffffff;"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:24px !important;"><code style="color:#000000;">}</code></span></div>
<div style="background-color:#f8f8f8;"><code>&nbsp;&nbsp;&nbsp;&nbsp;</code><span style="margin-left:12px !important;"><code style="color:#000000;">}</code></span></div>
</div>
&nbsp;
<h3>WWWRoot</h3>
We just change the name of the bot the default.htm under the wwwroot file.

That is it that completes the code for the bot. Let us now test the bot.
<h1>Testing</h1>
Following are the three scenarios we will test
<ol>
 	<li>Get Today's Weather</li>
 	<li>Get Forecast</li>
 	<li>Enter any incorrect option</li>
</ol>
These scenarios are tested using the bot emulator that we&nbsp; saw how to use in last part.
<h2>Get Today's Weather</h2>
Below is a chat sample captured in the bot emulator

<img class="alignnone size-full wp-image-152" src="https://theserverlessspirit.files.wordpress.com/2018/09/todaysweather.jpg" alt="TodaysWeather.JPG" width="850" height="1030">
<h2>Get Forecast</h2>
Samples are as follows

<img class="alignnone size-full wp-image-153" src="https://theserverlessspirit.files.wordpress.com/2018/09/forecast1.jpg" alt="Forecast1" width="847" height="966"><img class="alignnone size-full wp-image-154" src="https://theserverlessspirit.files.wordpress.com/2018/09/forecast2.jpg" alt="Forecast2" width="1000" height="759"><img class="alignnone size-full wp-image-155" src="https://theserverlessspirit.files.wordpress.com/2018/09/forecast3.jpg" alt="Forecast3" width="1002" height="548">
<h2>Incorrect Option</h2>
There can be many test cases for this like entering invalid name, place by providing string values with improper content. In such cases we need to apply proper validation e.g regex validations on email etc. We are not going to do that in this tutorial. The case we are studying is what happens when the user enters any other option than 1 and 2 as requested by bot. Following is a sample conversation

<img class="alignnone size-full wp-image-156" src="https://theserverlessspirit.files.wordpress.com/2018/09/incorrectinput.jpg" alt="IncorrectInput.JPG" width="846" height="998">

This completes our testing.
<h1>Code</h1>
The code for this sample can be found on GITHub at&nbsp;<a href="https://github.com/mandardhikari/WeatherAssistantBot" target="_blank" rel="noopener noreferrer">WeatherAssistantBot</a>
<h1>Conclusion</h1>
Today we saw how to create a simple weather bot using dialogs. There is some learning curve to the way a bot is coded using SDK v4 but if we keep on practicing, things will get easy.

In next part we will see how we can add some validation to the same bot and we will add a small feature of mailing the forecast to the user. Till then happy coding!! I would love to hear your thoughts in the comment section.